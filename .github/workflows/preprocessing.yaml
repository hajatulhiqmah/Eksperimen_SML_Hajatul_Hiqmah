name: Run Preprocessing

on:
  push:
    branches: [ main, master ] # Sesuaikan dengan nama branch utama Anda
    paths:
      - 'preprocessing/**'      # Hanya jalankan jika ada perubahan di folder preprocessing
      - 'namadataset_raw/**'  # Atau jika data mentah berubah

jobs:
  preprocess:
    runs-on: ubuntu-latest
    steps:
      # Langkah 1: Checkout kode repositori
      - name: Checkout code
        uses: actions/checkout@v3

      # Langkah 2: Siapkan lingkungan Python
      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9' # Anda bisa ganti versinya

      # Langkah 3: Instal dependensi yang diperlukan skrip
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install pandas  # Skrip kita hanya butuh pandas

      # Langkah 4: Jalankan skrip preprocessing
      - name: Run preprocessing script
        run: python preprocessing/automate_Nama-siswa.py

      # Langkah 5: Simpan dataset yang sudah diproses sebagai artifact
      # Ini memenuhi syarat "mengembalikan sebuah dataset terbaru"
      - name: Upload processed dataset artifact
        uses: actions/upload-artifact@v3
        with:
          name: processed-dataset
          path: preprocessing/namadataset_preprocessing/wine_processed.csv